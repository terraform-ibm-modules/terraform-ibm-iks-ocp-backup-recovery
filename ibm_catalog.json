{
  "products": [
    {
      "name": "deploy-arch-ibm-iks-ocp-backup-recovery",
      "label": "Cloud automation for Red Hat OpenShift Backup and Recovery on IBM Cloud",
      "product_kind": "solution",
      "tags": [
        "ibm_created",
        "target_terraform",
        "terraform",
        "solution",
        "containers",
        "backup",
        "recovery",
        "data_protection",
        "target_roks",
        "platform_engineering"
      ],
      "keywords": [
        "openshift",
        "backup",
        "recovery",
        "data protection",
        "cluster",
        "IaC",
        "infrastructure as code",
        "terraform",
        "solution",
        "ibm backup and recovery"
      ],
      "short_description": "Enables enterprise-grade backup and recovery for existing Red Hat OpenShift (ROKS) clusters using IBM Backup & Recovery Service with fully configurable and QuickStart options.",
      "long_description": "This solution integrates IBM Backup & Recovery Service with existing Red Hat OpenShift on IBM Cloud (ROKS) clusters. It automates the deployment of the Data Source Connector (DSC), cluster registration, security group rules, and protection policies to protect namespaces, persistent volumes, and cluster resources.\n\nTwo variations are available: a fully configurable option for production-grade deployments with fine-grained control, and a QuickStart option for rapid setup with sensible defaults. Both leverage reusable Terraform IBM Modules for consistency and best practices.\n\nYou can extend this architecture using other [Terraform IBM Modules](https://github.com/terraform-ibm-modules) to incorporate additional observability, security, or compliance features as needed.",
      "offering_docs_url": "https://cloud.ibm.com/docs/backup-recovery?topic=backup-recovery-data-source-connector-iks-roks",
      "offering_icon_url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-iks-ocp-backup-recovery/main/images/backup-recovery-icon.svg",
      "provider_name": "IBM",
      "features": [
        {
          "title": "Virtual Private Cloud",
          "description": "Creates and configures a Virtual Private Cloud (VPC) network on IBM Cloud for deploying the OpenShift cluster in a secure and isolated network environment. [Learn more](https://cloud.ibm.com/docs/vpc?topic=vpc-getting-started&interface=cli#create-and-configure-vpc)."
        },
        {
          "title": "Red Hat OpenShift Cluster",
          "description": "Creates and configures a Red Hat OpenShift cluster on a Virtual Private Cloud (VPC). [Learn more](https://cloud.ibm.com/docs/openshift?topic=openshift-cluster-create-vpc-gen2&interface=ui)."
        },
        {
          "title": "Object Storage",
          "description": "Creates and configures an Object Storage bucket which acts as OpenShift internal registry storage. [Learn More](https://cloud.ibm.com/docs/openshift?topic=openshift-storage-cos-understand)."
        },
        {
          "title": "Backup & Recovery Service Integration",
          "description": "Automates the deployment of Backup and Recovery feature for the OpenShift cluster, which is responsible for backing up and recovering data  within the OpenShift cluster. [Learn more](https://cloud.ibm.com/docs/backup-recovery?topic=backup-recovery-data-source-connector-iks-roks)."
        },
        {
          "title": "Sets up logging for the OpenShift cluster",
          "description": "Optionally, you can deploy [Cloud automation for Cloud Logs](https://cloud.ibm.com/catalog/7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3/architecture/deploy-arch-ibm-cloud-logs-63d8ae58-fbf3-41ce-b844-0fb5b85882ab-global) to route, alert, and visualize platform logs that are generated by your OpenShift cluster."
        },
        {
          "title": "Sets up monitoring operational metrics for the OpenShift cluster",
          "description": "Optionally, you can deploy [Cloud automation for Cloud Monitoring](https://cloud.ibm.com/catalog/7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3/architecture/deploy-arch-ibm-cloud-monitoring-73debdbf-894f-4c14-81c7-5ece3a70b67d-global) to measure how users and applications interact with your OpenShift cluster."
        },
        {
          "title": "Sets up activity tracking for the OpenShift cluster",
          "description": "Optionally, you can deploy [Cloud automation for Activity Tracker Event Routing](https://cloud.ibm.com/catalog/7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3/architecture/deploy-arch-ibm-activity-tracker-918453c3-4f97-4583-8c4a-83ef12fc7916-global) to route and securely store auditing events that are related to your OpenShift cluster."
        },
        {
          "title": "Secrets Manager",
          "description": "Optional integration with [Cloud automation for Secrets Manager](https://cloud.ibm.com/catalog/7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3/architecture/deploy-arch-ibm-secrets-manager-6d6ebc76-7bbd-42f5-8bc7-78f4fabd5944-global) for centrally managing Ingress subdomain certificates."
        },
        {
          "title": "Security and Compliance Alignment",
          "description": "Advanced configurations include features such as [audit logging](https://cloud.ibm.com/docs/containers?topic=containers-health-audit#audit-api-server) and encryption key management, and may align with [IBM Cloud Framework for Financial Services](https://cloud.ibm.com/docs/framework-financial-services?topic=framework-financial-services-about) for production use in regulated environments."
        },
        {
          "title": "Composable and Extensible Architecture",
          "description": "This architecture illustrates how Terraform IBM Modules(TIM) can be integrated to deliver a complete solution on IBM Cloud. Each module is a reusable, and validated component for security, compliance, and operational IBM best practices. You can deploy this architecture as-is or configure it as code by leveraging the underlying modules to fit your specific requirements. Explore the [source code and documentation](https://github.com/terraform-ibm-modules/terraform-ibm-iks-ocp-backup-recovery) to adapt, extend, or create entirely new solutions using these building blocks."
        }
      ],
      "support_details": "This product is in the community registry. As such support is handled through the originated repo. If you experience issues, please open an issue in the repository [here](https://github.com/terraform-ibm-modules/terraform-ibm-iks-ocp-backup-recovery/issues). Please note this product is not supported via the IBM Cloud Support Center.",
      "flavors": [
        {
          "label": "Fully configurable",
          "name": "fully-configurable",
          "index": 2,
          "install_type": "fullstack",
          "short_description": "Ideal for users who want flexibility with a reliable starting point.",
          "working_directory": "solutions/fully-configurable",
          "release_notes_url": "https://github.com/terraform-ibm-modules/terraform-ibm-iks-ocp-backup-recovery/releases",
          "iam_permissions": [
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Administrator"
              ],
              "service_name": "All Identity and Access enabled services",
              "notes": "[Optional] Required to to create trusted profile for App Configuration aggregator which is used for compliance scanning."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "iam-groups",
              "notes": "[Optional] Required for managing IAM access groups."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Administrator",
                "crn:v1:bluemix:public:iam-identity::::serviceRole:UserApiKeyCreator"
              ],
              "service_name": "iam-identity",
              "notes": "Required to create the containers-kubernetes-key needed by the OpenShift cluster on IBM Cloud."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "hs-crypto",
              "notes": "[Optional] Required if KMS encryption is enabled and Hyper Protect Crypto Service is used for encryption."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "kms",
              "notes": "[Optional] Required if KMS encryption is enabled and Key Protect Service is used for encryption."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "cloud-object-storage",
              "notes": "[Optional] Required if Cloud Object Storage is selected to store data from the OpenShift AI add-on, Cloud logs, or Activity Tracker events."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Administrator"
              ],
              "service_name": "containers-kubernetes",
              "notes": "Required to create and edit the OpenShift cluster and the related resources."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Administrator"
              ],
              "service_name": "is.vpc",
              "notes": "[Optional] Required for creating Virtual Private Cloud(VPC)."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Editor",
                "crn:v1:bluemix:public:iam::::serviceRole:Manager"
              ],
              "service_name": "secrets-manager",
              "notes": "[Optional] Required when enabling the Secrets Manager integration."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "sysdig-monitor",
              "notes": "[Optional] Required to create an instance of Cloud Monitoring."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "logs",
              "notes": "[Optional] Required to create an instance of Cloud Logs."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Writer",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "atracker",
              "notes": "[Optional] Required when enabling the Activity Tracker Event Routing."
            },
            {
              "service_name": "logs-router",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager"
              ],
              "notes": "[Optional] Required to create an instance of Logs Routing."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "sysdig-secure",
              "notes": "[Optional] Required for creating and managing SCC Workload Protection instance."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Administrator",
                "crn:v1:bluemix:public:iam::::serviceRole:Manager"
              ],
              "service_name": "apprapp",
              "notes": "[Optional] Required for provisioning the App Configuration instance."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "event-notifications",
              "notes": "[Optional] Required when enabling the Event Notifications integration."
            }
          ],
          "architecture": {
            "features": [
              {
                "title": " ",
                "description": "Configured to use IBM secure-by-default standards, but can be edited to fit your use case."
              }
            ],
            "diagrams": [
              {
                "diagram": {
                  "caption": "Red Hat OpenShift cluster with Backup and Recovery for IBM Cloud",
                  "url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-iks-ocp-backup-recovery/main/reference-architectures/architecture_diagram.svg",
                  "type": "image/svg+xml"
                },
                "description": "This architecture integrates an existing <b>Red Hat OpenShift (ROKS) cluster</b> with <b>IBM Backup & Recovery Service</b>. The solution deploys the <b>Data Source Connector (DSC)</b> via Helm, creates necessary Kubernetes resources, optionally configures outbound security group rules, registers the cluster, and applies a fully customizable protection policy.<br><br>Backups are stored in IBM Cloud Object Storage (managed by the Backup & Recovery instance) with options for immutable storage (WORM) to meet compliance requirements. This enables reliable point-in-time recovery of applications, data, and cluster configurations."
              }
            ]
          },
          "configuration": [
            {
              "key": "ibmcloud_api_key",
              "required": true
            },
            {
              "key": "region"
            },
            {
              "key": "cluster_id",
              "custom_config": {
                "type": "cluster_var",
                "grouping": "deployment",
                "original_grouping": "deployment"
              },
              "required": true
            },
            {
              "key": "cluster_resource_group_id",
              "required": true,
              "display_name": "cluster_resource_group",
              "custom_config": {
                "type": "resource_group",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "identifier": "rg_id"
                }
              }
            },
            {
              "key": "cluster_config_endpoint_type",
              "options": [
                {
                  "displayname": "Default",
                  "value": "default"
                },
                {
                  "displayname": "Private",
                  "value": "private"
                },
                {
                  "displayname": "VPE",
                  "value": "vpe"
                },
                {
                  "displayname": "Link",
                  "value": "link"
                }
              ]
            },
            {
              "key": "wait_till",
              "options": [
                {
                  "displayname": "Master Node Ready",
                  "value": "MasterNodeReady"
                },
                {
                  "displayname": "One Worker Node Ready",
                  "value": "OneWorkerNodeReady"
                },
                {
                  "displayname": "Ingress Ready",
                  "value": "IngressReady"
                },
                {
                  "displayname": "Normal",
                  "value": "Normal"
                }
              ]
            },
            {
              "key": "wait_till_timeout"
            },
            {
              "key": "policy"
            },
            {
              "key": "dsc_chart_uri"
            },
            {
              "key": "data_mover_image_uri"
            },
            {
              "key": "velero_image_uri"
            },
            {
              "key": "velero_aws_plugin_image_uri"
            },
            {
              "key": "velero_openshift_plugin_image_uri"
            },
            {
              "key": "enable_auto_protect"
            },
            {
              "key": "dsc_namespace"
            },
            {
              "key": "dsc_name"
            },
            {
              "key": "dsc_replicas"
            },
            {
              "key": "dsc_image_version"
            },
            {
              "key": "brs_connection_id"
            },
            {
              "key": "brs_instance_guid"
            },
            {
              "key": "brs_tenant_id"
            },
            {
              "key": "dsc_registration_token"
            }
          ],
          "dependencies": [],
          "dependency_version_2": true,
          "terraform_version": "1.12.2",
          "ignore_readme": true
        }
      ]
    }
  ]
}
