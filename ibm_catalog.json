{
  "products": [
    {
      "name": "deploy-arch-ibm-iks-ocp-backup-recovery",
      "label": "Cloud automation for Red Hat OpenShift Backup and Recovery on IBM Cloud",
      "product_kind": "solution",
      "tags": [
        "ibm_created",
        "target_terraform",
        "terraform",
        "solution",
        "containers",
        "backup",
        "recovery",
        "data_protection",
        "target_roks",
        "platform_engineering"
      ],
      "keywords": [
        "openshift",
        "backup",
        "recovery",
        "data protection",
        "cluster",
        "IaC",
        "infrastructure as code",
        "terraform",
        "solution",
        "ibm backup and recovery"
      ],
      "short_description": "Enables enterprise-grade backup and recovery for existing Red Hat OpenShift (ROKS) clusters using IBM Backup & Recovery Service with fully configurable and QuickStart options.",
      "long_description": "This solution integrates IBM Backup & Recovery Service with existing Red Hat OpenShift on IBM Cloud (ROKS) clusters. It automates the deployment of the Data Source Connector (DSC), cluster registration, security group rules, and protection policies to protect namespaces, persistent volumes, and cluster resources.\n\nTwo variations are available: a fully configurable option for production-grade deployments with fine-grained control, and a QuickStart option for rapid setup with sensible defaults. Both leverage reusable Terraform IBM Modules for consistency and best practices.\n\nYou can extend this architecture using other [Terraform IBM Modules](https://github.com/terraform-ibm-modules) to incorporate additional observability, security, or compliance features as needed.",
      "offering_docs_url": "https://cloud.ibm.com/docs/backup-recovery?topic=backup-recovery-data-source-connector-iks-roks",
      "offering_icon_url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-iks-ocp-backup-recovery/main/images/backup-recovery-icon.svg",
      "provider_name": "IBM",
      "features": [
        {
          "title": "Virtual Private Cloud",
          "description": "Creates and configures a Virtual Private Cloud (VPC) network on IBM Cloud for deploying the OpenShift cluster in a secure and isolated network environment. [Learn more](https://cloud.ibm.com/docs/vpc?topic=vpc-getting-started&interface=cli#create-and-configure-vpc)."
        },
        {
          "title": "Red Hat OpenShift Cluster",
          "description": "Creates and configures a Red Hat OpenShift cluster on a Virtual Private Cloud (VPC). [Learn more](https://cloud.ibm.com/docs/openshift?topic=openshift-cluster-create-vpc-gen2&interface=ui)."
        },
        {
          "title": "Object Storage",
          "description": "Creates and configures an Object Storage bucket which acts as OpenShift internal registry storage. [Learn More](https://cloud.ibm.com/docs/openshift?topic=openshift-storage-cos-understand)."
        },
        {
          "title": "Backup & Recovery Service Integration",
          "description": "Automates the deployment of Backup and Recovery feature for the OpenShift cluster, which is responsible for backing up and recovering data  within the OpenShift cluster. [Learn more](https://cloud.ibm.com/docs/backup-recovery?topic=backup-recovery-data-source-connector-iks-roks)."
        },
        {
          "title": "Sets up logging for the OpenShift cluster",
          "description": "Optionally, you can deploy [Cloud automation for Cloud Logs](https://cloud.ibm.com/catalog/7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3/architecture/deploy-arch-ibm-cloud-logs-63d8ae58-fbf3-41ce-b844-0fb5b85882ab-global) to route, alert, and visualize platform logs that are generated by your OpenShift cluster."
        },
        {
          "title": "Sets up monitoring operational metrics for the OpenShift cluster",
          "description": "Optionally, you can deploy [Cloud automation for Cloud Monitoring](https://cloud.ibm.com/catalog/7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3/architecture/deploy-arch-ibm-cloud-monitoring-73debdbf-894f-4c14-81c7-5ece3a70b67d-global) to measure how users and applications interact with your OpenShift cluster."
        },
        {
          "title": "Sets up activity tracking for the OpenShift cluster",
          "description": "Optionally, you can deploy [Cloud automation for Activity Tracker Event Routing](https://cloud.ibm.com/catalog/7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3/architecture/deploy-arch-ibm-activity-tracker-918453c3-4f97-4583-8c4a-83ef12fc7916-global) to route and securely store auditing events that are related to your OpenShift cluster."
        },
        {
          "title": "Secrets Manager",
          "description": "Optional integration with [Cloud automation for Secrets Manager](https://cloud.ibm.com/catalog/7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3/architecture/deploy-arch-ibm-secrets-manager-6d6ebc76-7bbd-42f5-8bc7-78f4fabd5944-global) for centrally managing Ingress subdomain certificates."
        },
        {
          "title": "Security and Compliance Alignment",
          "description": "Advanced configurations include features such as [audit logging](https://cloud.ibm.com/docs/containers?topic=containers-health-audit#audit-api-server) and encryption key management, and may align with [IBM Cloud Framework for Financial Services](https://cloud.ibm.com/docs/framework-financial-services?topic=framework-financial-services-about) for production use in regulated environments."
        },
        {
          "title": "Composable and Extensible Architecture",
          "description": "This architecture illustrates how Terraform IBM Modules(TIM) can be integrated to deliver a complete solution on IBM Cloud. Each module is a reusable, and validated component for security, compliance, and operational IBM best practices. You can deploy this architecture as-is or configure it as code by leveraging the underlying modules to fit your specific requirements. Explore the [source code and documentation](https://github.com/terraform-ibm-modules/terraform-ibm-iks-ocp-backup-recovery) to adapt, extend, or create entirely new solutions using these building blocks."
        }
      ],
      "support_details": "This product is in the community registry. As such support is handled through the originated repo. If you experience issues, please open an issue in the repository [here](https://github.com/terraform-ibm-modules/terraform-ibm-iks-ocp-backup-recovery/issues). Please note this product is not supported via the IBM Cloud Support Center.",
      "flavors": [
        {
          "label": "Fully configurable",
          "name": "fully-configurable",
          "index": 2,
          "install_type": "fullstack",
          "short_description": "Ideal for users who want flexibility with a reliable starting point.",
          "working_directory": "solutions/fully-configurable",
          "release_notes_url": "https://github.com/terraform-ibm-modules/terraform-ibm-iks-ocp-backup-recovery/releases",
          "iam_permissions": [
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Administrator"
              ],
              "service_name": "All Identity and Access enabled services",
              "notes": "[Optional] Required to to create trusted profile for App Configuration aggregator which is used for compliance scanning."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "iam-groups",
              "notes": "[Optional] Required for managing IAM access groups."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Administrator",
                "crn:v1:bluemix:public:iam-identity::::serviceRole:UserApiKeyCreator"
              ],
              "service_name": "iam-identity",
              "notes": "Required to create the containers-kubernetes-key needed by the OpenShift cluster on IBM Cloud."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "hs-crypto",
              "notes": "[Optional] Required if KMS encryption is enabled and Hyper Protect Crypto Service is used for encryption."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "kms",
              "notes": "[Optional] Required if KMS encryption is enabled and Key Protect Service is used for encryption."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "cloud-object-storage",
              "notes": "[Optional] Required if Cloud Object Storage is selected to store data from the OpenShift AI add-on, Cloud logs, or Activity Tracker events."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Administrator"
              ],
              "service_name": "containers-kubernetes",
              "notes": "Required to create and edit the OpenShift cluster and the related resources."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Administrator"
              ],
              "service_name": "is.vpc",
              "notes": "[Optional] Required for creating Virtual Private Cloud(VPC)."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Editor",
                "crn:v1:bluemix:public:iam::::serviceRole:Manager"
              ],
              "service_name": "secrets-manager",
              "notes": "[Optional] Required when enabling the Secrets Manager integration."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "sysdig-monitor",
              "notes": "[Optional] Required to create an instance of Cloud Monitoring."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "logs",
              "notes": "[Optional] Required to create an instance of Cloud Logs."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Writer",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "atracker",
              "notes": "[Optional] Required when enabling the Activity Tracker Event Routing."
            },
            {
              "service_name": "logs-router",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager"
              ],
              "notes": "[Optional] Required to create an instance of Logs Routing."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "sysdig-secure",
              "notes": "[Optional] Required for creating and managing SCC Workload Protection instance."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Administrator",
                "crn:v1:bluemix:public:iam::::serviceRole:Manager"
              ],
              "service_name": "apprapp",
              "notes": "[Optional] Required for provisioning the App Configuration instance."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "event-notifications",
              "notes": "[Optional] Required when enabling the Event Notifications integration."
            }
          ],
          "architecture": {
            "features": [
              {
                "title": " ",
                "description": "Configured to use IBM secure-by-default standards, but can be edited to fit your use case."
              }
            ],
            "diagrams": [
              {
                "diagram": {
                  "caption": "Red Hat OpenShift cluster with Backup and Recovery for IBM Cloud",
                  "url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-iks-ocp-backup-recovery/main/reference-architectures/architecture_diagram.svg",
                  "type": "image/svg+xml"
                },
                "description": "This architecture integrates an existing <b>Red Hat OpenShift (ROKS) cluster</b> with <b>IBM Backup & Recovery Service</b>. The solution deploys the <b>Data Source Connector (DSC)</b> via Helm, creates necessary Kubernetes resources, optionally configures outbound security group rules, registers the cluster, and applies a fully customizable protection policy.<br><br>Backups are stored in IBM Cloud Object Storage (managed by the Backup & Recovery instance) with options for immutable storage (WORM) to meet compliance requirements. This enables reliable point-in-time recovery of applications, data, and cluster configurations."
              }
            ]
          },
          "configuration": [
            {
              "key": "ibmcloud_api_key",
              "required": true
            },
            {
              "key": "prefix",
              "type": "string",
              "default_value": "dev",
              "description": "The prefix to add to all resources that this solution creates (e.g `prod`, `test`, `dev`). To skip using a prefix, set this value to null or an empty string. [Learn more](https://terraform-ibm-modules.github.io/documentation/#/prefix.md).",
              "required": true,
              "virtual": true,
              "random_string": {
                "length": 4
              },
              "value_constraints": [
                {
                  "type": "regex",
                  "description": "Prefix must begin with a lowercase letter and may contain only lowercase letters, digits, and hyphens '-'. It must not end with a hyphen('-'), and cannot contain consecutive hyphens ('--'). It should not exceed 16 characters.",
                  "value": "^$|^__NULL__$|^[a-z](?!.*--)(?:[a-z0-9-]{0,14}[a-z0-9])?$"
                }
              ]
            },
            {
              "key": "existing_resource_group_name",
              "display_name": "resource_group",
              "custom_config": {
                "type": "resource_group",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "identifier": "rg_name"
                }
              },
              "default_value": "Default",
              "description": "The name of an existing resource group to provision the resources. [Learn more](https://cloud.ibm.com/docs/account?topic=account-rgs&interface=ui#create_rgs) about how to create a resource group.",
              "virtual": true
            },
            {
              "key": "cluster_name",
              "type": "string",
              "default_value": "openshift",
              "description": "The name of the new IBM Cloud OpenShift Cluster. If a `prefix` input variable is specified, it is added to this name in the `<prefix>-value` format.",
              "display_name": "cluster_name",
              "required": true,
              "virtual": true
            },
            {
              "key": "subnets",
              "type": "object",
              "default_value": "{\n  zone-1 = [],\n  zone-2 = [\n      {\n        name           = \"subnet-a\"\n        cidr           = \"10.10.10.0/24\"\n        public_gateway = true\n        acl_name       = \"vpc-acl\"\n        no_addr_prefix = false\n      }\n    ]\n  }",
              "description": "List of subnets for the vpc. For each item in each array, a subnet will be created. Items can be either CIDR blocks or total ipv4 addresses. Public gateways will be enabled only in zones where a gateway has been created. [Learn more](https://github.com/terraform-ibm-modules/terraform-ibm-landing-zone-vpc/blob/main/solutions/fully-configurable/DA-types.md#subnets-).",
              "display_name": "subnets",
              "required": false,
              "virtual": true
            },
            {
              "key": "region",
              "required": true,
              "custom_config": {
                "type": "vpc_region",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "generationType": "2"
                }
              },
              "default_value": "us-east"
            },
            {
              "key": "cluster_id",
              "custom_config": {
                "type": "cluster_var",
                "grouping": "deployment",
                "original_grouping": "deployment"
              },
              "required": true
            },
            {
              "key": "cluster_resource_group_id",
              "required": true,
              "display_name": "cluster_resource_group",
              "custom_config": {
                "type": "resource_group",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "identifier": "rg_id"
                }
              }
            },
            {
              "key": "openshift_version",
              "required": true,
              "virtual": true,
              "type": "string",
              "default_value": "4.19",
              "description": "Version of the OpenShift cluster to provision.",
              "options": [
                {
                  "displayname": "4.17",
                  "value": "4.17"
                },
                {
                  "displayname": "4.18",
                  "value": "4.18"
                },
                {
                  "displayname": "4.19",
                  "value": "4.19"
                }
              ]
            },
            {
              "key": "default_worker_pool_machine_type",
              "required": true,
              "type": "string",
              "default_value": "cx2d.metal.96x192",
              "description": "Specifies the machine type for the default worker pool. This determines the CPU, memory, and disk resources available to each worker node. For OpenShift Virtualization installation, machines should be VPC bare metal servers. Refer [IBM Cloud documentation for available machine types](https://cloud.ibm.com/docs/vpc?topic=vpc-bare-metal-servers-profile&interface=ui#bare-metal-profile-availability-by-region).",
              "virtual": true,
              "options": [
                {
                  "displayname": "bx2.metal.96x384",
                  "value": "bx2.metal.96x384"
                },
                {
                  "displayname": "bx2d.metal.96x384",
                  "value": "bx2d.metal.96x384"
                },
                {
                  "displayname": "cx2.metal.96x192",
                  "value": "cx2.metal.96x192"
                },
                {
                  "displayname": "cx2d.metal.96x192",
                  "value": "cx2d.metal.96x192"
                },
                {
                  "displayname": "mx2.metal.96x768",
                  "value": "mx2.metal.96x768"
                },
                {
                  "displayname": "mx2d.metal.96x768",
                  "value": "mx2d.metal.96x768"
                }
              ]
            },
            {
              "key": "default_worker_pool_workers_per_zone",
              "virtual": true,
              "type": "number",
              "default_value": 2,
              "description": "Defines the number of worker nodes to provision in each zone for the default worker pool. Overall cluster must have at least 2 worker nodes."
            },
            {
              "key": "default_worker_pool_operating_system",
              "required": true,
              "virtual": true,
              "type": "string",
              "default_value": "RHCOS",
              "description": "Provide the operating system for the worker nodes in the default worker pool. OpenShift Virtualization installation is supported only on RHCOS operating system. Refer [here](https://cloud.ibm.com/docs/openshift?topic=openshift-openshift_versions) for supported Operating Systems.",
              "options": [
                {
                  "displayname": "Red Hat CoreOS",
                  "value": "RHCOS"
                }
              ]
            },
            {
              "key": "addons",
              "type": "object",
              "description": "Map of OpenShift cluster add-on versions to install (NOTE: The 'vpc-block-csi-driver' add-on is installed by default for VPC clusters and 'ibm-storage-operator' is installed by default in OCP 4.15 and later, however you can explicitly specify it here if you wish to choose a later version than the default one). For full list of all supported add-ons and versions, see https://cloud.ibm.com/docs/containers?topic=containers-supported-cluster-addon-versions. [Learn more](https://github.com/terraform-ibm-modules/terraform-ibm-iks-ocp-backup-recovery/blob/main/solutions/fully-configurable/DA_docs.md#options-with-addons)",
              "display_name": "addons",
              "required": false,
              "virtual": true
            },
            {
              "key": "additional_worker_pools",
              "type": "array",
              "default_value": "[]",
              "description": "List of additional worker pools. [Learn more](https://github.com/terraform-ibm-modules/terraform-ibm-iks-ocp-backup-recovery/blob/main/solutions/fully-configurable/DA_docs.md#options-with-worker-pools)",
              "display_name": "additional_worker_pools",
              "required": false,
              "custom_config": {
                "type": "textarea",
                "grouping": "deployment",
                "original_grouping": "deployment"
              },
              "virtual": true
            },
            {
              "key": "cluster_config_endpoint_type",
              "options": [
                {
                  "displayname": "Default",
                  "value": "default"
                },
                {
                  "displayname": "Private",
                  "value": "private"
                },
                {
                  "displayname": "VPE",
                  "value": "vpe"
                },
                {
                  "displayname": "Link",
                  "value": "link"
                }
              ]
            },
            {
              "key": "wait_till",
              "options": [
                {
                  "displayname": "Master Node Ready",
                  "value": "MasterNodeReady"
                },
                {
                  "displayname": "One Worker Node Ready",
                  "value": "OneWorkerNodeReady"
                },
                {
                  "displayname": "Ingress Ready",
                  "value": "IngressReady"
                },
                {
                  "displayname": "Normal",
                  "value": "Normal"
                }
              ]
            },
            {
              "key": "wait_till_timeout"
            },
            {
              "key": "enable_platform_metrics",
              "type": "boolean",
              "default_value": false,
              "description": "When set to `true`, the IBM Cloud Monitoring instance will be configured to collect platform metrics from the provided region. ⚠️ You can configure 1 instance only of the IBM Cloud Monitoring service per region to collect platform metrics in that location. Check with the account or service administrator if another monitoring instance has already been configured. You may not have permissions to see all monitoring instances in the region. [Learn more](https://cloud.ibm.com/docs/monitoring?topic=monitoring-platform_metrics_enabling).",
              "required": true,
              "virtual": true,
              "options": [
                {
                  "displayname": "true",
                  "value": "true"
                },
                {
                  "displayname": "false",
                  "value": "false"
                }
              ]
            },
            {
              "key": "logs_routing_tenant_regions",
              "type": "array",
              "default_value": [],
              "description": "To manage platform logs that are generated by IBM Cloud services in a region of IBM Cloud, you must create a tenant in each region that you operate. Pass a list of regions to create a tenant in. For example: [\"us-south\", \"us-east\"]. [Learn more](https://cloud.ibm.com/docs/logs-router?topic=logs-router-about-platform-logs).",
              "required": true,
              "virtual": true,
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "network_acls",
              "type": "list(object)",
              "default_value": "[\n  { name                         = \"vpc-acl\"\n    add_ibm_cloud_internal_rules = true\n    add_vpc_connectivity_rules   = true\n    prepend_ibm_rules            = true\n    rules = [\n      {\n        name      = \"allow-443-inbound-source\"\n        action    = \"allow\"\n        direction = \"inbound\"\n        tcp = {\n          source_port_min = 443\n          source_port_max = 443\n        }\n        destination = \"0.0.0.0/0\"\n        source      = \"0.0.0.0/0\"\n      },\n      {\n        name      = \"allow-443-inbound-dest\"\n        action    = \"allow\"\n        direction = \"inbound\"\n        tcp = {\n          port_max = 443\n          port_min = 443\n        }\n        destination = \"0.0.0.0/0\"\n        source      = \"0.0.0.0/0\"\n      },\n      {\n        name      = \"allow-all-80-inbound\"\n        action    = \"allow\"\n        direction = \"inbound\"\n        tcp = {\n          source_port_min = 80\n          source_port_max = 80\n        }\n        destination = \"0.0.0.0/0\"\n        source      = \"0.0.0.0/0\"\n      },\n      {\n        name      = \"allow-all-ingress-inbound\"\n        action    = \"allow\"\n        direction = \"inbound\"\n        tcp = {\n          source_port_min = 30000\n          source_port_max = 32767\n        }\n        destination = \"0.0.0.0/0\"\n        source      = \"0.0.0.0/0\"\n      },\n      {\n        name      = \"allow-443-outbound-source\"\n        action    = \"allow\"\n        direction = \"outbound\"\n        tcp = {\n          source_port_min = 443\n          source_port_max = 443\n        }\n        destination = \"0.0.0.0/0\"\n        source      = \"0.0.0.0/0\"\n      },\n      {\n        name      = \"allow-443-outbound-dest\"\n        action    = \"allow\"\n        direction = \"outbound\"\n        tcp = {\n          port_min = 443\n          port_max = 443\n        }\n        destination = \"0.0.0.0/0\"\n        source      = \"0.0.0.0/0\"\n      },\n      {\n        name      = \"allow-all-80-outbound\"\n        action    = \"allow\"\n        direction = \"outbound\"\n        tcp = {\n          port_min = 80\n          port_max = 80\n        }\n        destination = \"0.0.0.0/0\"\n        source      = \"0.0.0.0/0\"\n      },\n      {\n        name      = \"allow-all-ingress-outbound\"\n        action    = \"allow\"\n        direction = \"outbound\"\n        tcp = {\n          port_min = 30000\n          port_max = 32767\n        }\n        destination = \"0.0.0.0/0\"\n        source      = \"0.0.0.0/0\"\n      }\n    ]\n  }\n]",
              "description": "The list of ACLs to create. Provide at least one rule for each ACL. [Learn more](https://github.com/terraform-ibm-modules/terraform-ibm-landing-zone-vpc/blob/main/solutions/fully-configurable/DA-types.md#network-acls-).",
              "required": false,
              "virtual": true,
              "custom_config": {
                "type": "code_editor",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "supportedLanguages": [
                    "hcl"
                  ]
                }
              }
            },
            {
              "key": "secrets_manager_service_plan",
              "required": true,
              "virtual": true,
              "type": "string",
              "options": [
                {
                  "displayname": "Standard",
                  "value": "standard"
                },
                {
                  "displayname": "Trial",
                  "value": "trial"
                }
              ],
              "default_value": "standard",
              "description": "The pricing plan to use when provisioning a Secrets Manager instance. Possible values: `standard`, `trial`. You can create only one Trial instance of Secrets Manager per account. Before you can create a new Trial instance, you must delete the existing Trial instance and its reclamation. [Learn more](https://cloud.ibm.com/docs/secrets-manager?topic=secrets-manager-create-instance&interface=ui#upgrade-instance-standard)."
            },
            {
              "key": "resource_tags",
              "custom_config": {
                "type": "array",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "brs_instance_name",
              "required": true,
              "type": "string",
              "default_value": "brs-instance",
              "description": "The name of the Backup and Recovery Service instance to create or use."
            },
            {
              "key": "create_new_brs_instance",
              "required": false,
              "type": "boolean",
              "default_value": true,
              "description": "Flag to create a new Backup and Recovery Service instance. If set to false, an existing instance will be used."
            },
            {
              "key": "brs_connection_name",
              "required": true,
              "type": "string",
              "default_value": "brs-connection",
              "description": "The name of the Backup and Recovery Service connection to create or use."
            },
            {
              "key": "create_new_brs_connection",
              "required": false,
              "type": "boolean",
              "default_value": true,
              "description": "Flag to create a new Backup and Recovery Service connection. If set to false, an existing connection will be used."
            },
            {
              "key": "policy",
              "required": false
            },
            {
              "key": "dsc_chart_uri",
              "required": false,
              "type": "string",
              "default_value": "oci://icr.io/ext/brs/cohesity-dsc-chart:7.2.16-release-20251014-fbc7ff85@sha256:69114edaeb80198684040ca9c014b57fd2993f45e07dfeffd64fd5ee28165cd2",
              "description": "The OCI URI of the Data Source Connector Helm chart to deploy."
            },
            {
              "key": "data_mover_image_uri",
              "required": false,
              "type": "string",
              "default_value": "icr.io/ext/brs/cohesity-datamover:7.2.16@sha256:f7fa1cfbb74e469117d553c02deedf6f4a35b3a61647028a9424be346fc3eb09",
              "description": "The image URI for the Data Mover container."
            },
            {
              "key": "velero_image_uri",
              "required": false,
              "type": "string",
              "default_value": "icr.io/ext/brs/velero:7.2.16@sha256:1a5ee2393f0b1063ef095246d304c1ec4648c3af6a47261325ef039256a4a041",
              "description": "The image URI for the Velero container."
            },
            {
              "key": "velero_aws_plugin_image_uri",
              "required": false,
              "type": "string",
              "default_value": "icr.io/ext/brs/velero-plugin-for-aws:7.2.16@sha256:dbcd35bcbf0d4c7deeae67b7dfd55c4fa51880b61307d71eeea3e9e84a370e13",
              "description": "The image URI for the Velero AWS plugin container."
            },
            {
              "key": "velero_openshift_plugin_image_uri",
              "required": false,
              "type": "string",
              "default_value": "icr.io/ext/brs/velero-plugin-for-openshift:7.2.16@sha256:6b643edcb920ad379c9ef1e2cca112a2ad0a1d55987f9c27af4022f7e3b19552",
              "description": "The image URI for the Velero OpenShift plugin container."
            },
            {
              "key": "enable_auto_protect",
              "type": "boolean",
              "default_value": false,
              "description": "When set to `true`, newly created namespaces in the OpenShift cluster will be automatically protected according to the defined backup policy.",
              "required": false
            },
            {
              "key": "dsc_namespace",
              "type": "string",
              "default_value": "ibm-brs-data-source-connector",
              "description": "The Kubernetes namespace in which to deploy the Data Source Connector.",
              "required": false
            },
            {
              "key": "dsc_name",
              "type": "string",
              "default_value": "dsc",
              "description": "The name to assign to the Data Source Connector deployment.",
              "required": false
            },
            {
              "key": "dsc_replicas",
              "type": "number",
              "default_value": 1,
              "description": "The number of replicas for the Data Source Connector deployment.",
              "required": false
            },
            {
              "key": "dsc_image_version",
              "type": "string",
              "default_value": "icr.io/ext/brs/cohesity-data-source-connector:7.2.16@sha256:2674c764ca46310aef3adb733d950f7786d9bf560bf72c22cff52370e77e29b5",
              "description": "The container image for the Data Source Connector.",
              "required": false
            }
          ],
          "dependencies": [
            {
              "name": "deploy-arch-ibm-slz-ocp",
              "catalog_id": "1082e7d2-5e2f-0a11-a3bc-f88a8e1931fc",
              "flavors": [
                "fully-configurable"
              ],
              "id": "95fccffc-ae3b-42df-b6d9-80be5914d852-global",
              "optional": true,
              "on_by_default": true,
              "input_mapping": [
                {
                  "dependency_output": "cluster_id",
                  "version_input": "cluster_id"
                },
                {
                  "dependency_input": "region",
                  "version_input": "region",
                  "reference_version": true
                },
                {
                  "dependency_input": "existing_resource_group_name",
                  "version_input": "existing_resource_group_name",
                  "reference_version": true
                },
                {
                  "dependency_output": "resource_group_id",
                  "version_input": "cluster_resource_group_id"
                },
                {
                  "dependency_input": "default_worker_pool_machine_type",
                  "version_input": "default_worker_pool_machine_type",
                  "reference_version": true
                },
                {
                  "dependency_input": "default_worker_pool_workers_per_zone",
                  "version_input": "default_worker_pool_workers_per_zone",
                  "reference_version": true
                },
                {
                  "dependency_input": "default_worker_pool_operating_system",
                  "version_input": "default_worker_pool_operating_system",
                  "reference_version": true
                },
                {
                  "dependency_input": "openshift_version",
                  "version_input": "openshift_version",
                  "reference_version": true
                },
                {
                  "dependency_input": "addons",
                  "version_input": "addons",
                  "reference_version": true
                },
                {
                  "dependency_input": "additional_worker_pools",
                  "version_input": "additional_worker_pools",
                  "reference_version": true
                },
                {
                  "dependency_input": "cluster_name",
                  "version_input": "cluster_name",
                  "reference_version": true
                },
                {
                  "dependency_input": "prefix",
                  "version_input": "prefix",
                  "reference_version": true
                },
                {
                  "dependency_input": "subnets",
                  "version_input": "subnets",
                  "reference_version": true
                },
                {
                  "dependency_input": "allow_outbound_traffic",
                  "value": true
                },
                {
                  "dependency_input": "allow_public_access_to_cluster_management",
                  "value": true
                },
                {
                  "dependency_input": "logs_routing_tenant_regions",
                  "version_input": "logs_routing_tenant_regions",
                  "reference_version": true
                },
                {
                  "dependency_input": "enable_platform_metrics",
                  "version_input": "enable_platform_metrics",
                  "reference_version": true
                },
                {
                  "dependency_input": "network_acls",
                  "version_input": "network_acls",
                  "reference_version": true
                },
                {
                  "dependency_input": "secrets_manager_service_plan",
                  "version_input": "secrets_manager_service_plan",
                  "reference_version": true
                }
              ],
              "version": "v3.76.4"
            }
          ],
          "dependency_version_2": true,
          "terraform_version": "1.12.2",
          "ignore_readme": true
        },
        {
          "label": "Quickstart",
          "name": "quickstart",
          "index": 1,
          "install_type": "fullstack",
          "short_description": "Ideal for users new to IBM Cloud or Backup and Recovery who want to get started without configuring underlying infrastructure.",
          "working_directory": "solutions/quickstart",
          "iam_permissions": [
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Administrator"
              ],
              "service_name": "containers-kubernetes",
              "notes": "Required to create and edit OpenShift cluster and the related resources."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Administrator",
                "crn:v1:bluemix:public:iam-identity::::serviceRole:UserApiKeyCreator"
              ],
              "service_name": "iam-identity",
              "notes": "Required to create the containers-kubernetes-key needed by the OpenShift cluster on IBM Cloud."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "is.vpc",
              "notes": "Required for creating Virtual Private Cloud(VPC)."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "cloud-object-storage",
              "notes": "Required to create Cloud Object Storage (COS) Instance."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Viewer"
              ],
              "service_name": "Resource group only",
              "notes": "Viewer access is required in the resource group you want to provision in."
            }
          ],
          "architecture": {
            "features": [
              {
                "title": " ",
                "description": "Configures QuickStart deployment of Backup and Recovery of Red Hat OpenShift within an IBM Cloud with limited options."
              }
            ],
            "diagrams": [
              {
                "diagram": {
                  "caption": "Red Hat OpenShift cluster with Backup and Recovery for IBM Cloud",
                  "url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-iks-ocp-backup-recovery/main/reference-architectures/architecture_diagram.svg",
                  "type": "image/svg+xml"
                },
                "description": "This architecture integrates creates <b>Red Hat OpenShift (ROKS) cluster</b> with <b>IBM Backup & Recovery Service</b>. The solution deploys the <b>Data Source Connector (DSC)</b> via Helm, creates necessary Kubernetes resources, optionally configures outbound security group rules, registers the cluster, and applies a fully customizable protection policy.<br><br>Backups are stored in IBM Cloud Object Storage (managed by the Backup & Recovery instance) with options for immutable storage (WORM) to meet compliance requirements. This enables reliable point-in-time recovery of applications, data, and cluster configurations."
              }
            ]
          },
          "configuration": [
            {
              "key": "ibmcloud_api_key"
            },
            {
              "key": "prefix",
              "required": true,
              "default_value": "dev",
              "random_string": {
                "length": 4
              },
              "value_constraints": [
                {
                  "type": "regex",
                  "description": "Prefix must begin with a lowercase letter and may contain only lowercase letters, digits, and hyphens '-'. It must not end with a hyphen('-'), and cannot contain consecutive hyphens ('--'). It should not exceed 16 characters.",
                  "value": "^$|^__NULL__$|^[a-z](?!.*--)(?:[a-z0-9-]{0,14}[a-z0-9])?$"
                }
              ]
            },
            {
              "key": "existing_resource_group_name",
              "display_name": "resource_group",
              "custom_config": {
                "type": "resource_group",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "identifier": "rg_name"
                }
              }
            },
            {
              "key": "region",
              "required": true,
              "custom_config": {
                "type": "vpc_region",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "generationType": "2"
                }
              }
            },
            {
              "key": "zone",
              "required": true,
              "options": [
                {
                  "displayname": "1",
                  "value": 1
                },
                {
                  "displayname": "2",
                  "value": 2
                },
                {
                  "displayname": "3",
                  "value": 3
                }
              ]
            },
            {
              "key": "openshift_version",
              "required": true,
              "options": [
                {
                  "displayname": "4.17",
                  "value": "4.17"
                },
                {
                  "displayname": "4.18",
                  "value": "4.18"
                },
                {
                  "displayname": "4.19",
                  "value": "4.19"
                }
              ]
            },
            {
              "key": "machine_type",
              "required": true,
              "options": [
                {
                  "displayname": "bx2.metal.96x384",
                  "value": "bx2.metal.96x384"
                },
                {
                  "displayname": "bx2d.metal.96x384",
                  "value": "bx2d.metal.96x384"
                },
                {
                  "displayname": "cx2.metal.96x192",
                  "value": "cx2.metal.96x192"
                },
                {
                  "displayname": "cx2d.metal.96x192",
                  "value": "cx2d.metal.96x192"
                },
                {
                  "displayname": "mx2.metal.96x768",
                  "value": "mx2.metal.96x768"
                },
                {
                  "displayname": "mx2d.metal.96x768",
                  "value": "mx2d.metal.96x768"
                }
              ]
            },
            {
              "key": "workers_per_zone"
            },
            {
              "key": "operating_system",
              "options": [
                {
                  "displayname": "Red Hat CoreOS",
                  "value": "RHCOS"
                }
              ]
            },
            {
              "key": "cluster_resource_tags",
              "custom_config": {
                "type": "array",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "access_tags",
              "custom_config": {
                "type": "array",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "openshift_entitlement"
            },
            {
              "key": "cluster_ready_when",
              "options": [
                {
                  "displayname": "Normal",
                  "value": "Normal"
                },
                {
                  "displayname": "IngressReady",
                  "value": "IngressReady"
                },
                {
                  "displayname": "OneWorkerNodeReady",
                  "value": "OneWorkerNodeReady"
                },
                {
                  "displayname": "MasterNodeReady",
                  "value": "MasterNodeReady"
                }
              ]
            },
            {
              "key": "addons"
            },
            {
              "key": "address_prefix"
            },
            {
              "key": "cluster_name"
            },
            {
              "key": "vpc_resource_tags"
            },
            {
              "key": "cluster_config_endpoint_type",
              "options": [
                {
                  "displayname": "Default",
                  "value": "default"
                },
                {
                  "displayname": "Private",
                  "value": "private"
                },
                {
                  "displayname": "VPE",
                  "value": "vpe"
                },
                {
                  "displayname": "Link",
                  "value": "link"
                }
              ]
            },
            {
              "key": "wait_till",
              "options": [
                {
                  "displayname": "Master Node Ready",
                  "value": "MasterNodeReady"
                },
                {
                  "displayname": "One Worker Node Ready",
                  "value": "OneWorkerNodeReady"
                },
                {
                  "displayname": "Ingress Ready",
                  "value": "IngressReady"
                },
                {
                  "displayname": "Normal",
                  "value": "Normal"
                }
              ]
            },
            {
              "key": "wait_till_timeout"
            },
            {
              "key": "resource_tags",
              "custom_config": {
                "type": "array",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "brs_instance_name",
              "required": true
            },
            {
              "key": "brs_connection_name",
              "required": true
            },
            {
              "key": "policy"
            }
          ],
          "dependency_version_2": true,
          "terraform_version": "1.12.2",
          "ignore_readme": true
        }
      ]
    }
  ]
}
